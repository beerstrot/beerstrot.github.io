"use strict";(self.webpackChunkfoundation_zurb_template=self.webpackChunkfoundation_zurb_template||[]).push([[961],{961:function(t,n,a){a.r(n);var e=a(425),o=a(453);$(document).ready((function(){!function(){var t=window.localStorage.currentOrder;if(t){var n=JSON.parse(t);window.prods=n,n&&n.forEach((function(t){var n=t.quantity*t.price1,a=(0,o.In)(t.name,t.noteText,t.cotturaV,t.quantity,(0,e.ao)(n));console.log({template:a}),$("#itens-carrello-checkout").append(a)}));var a=n.reduce((function(t,n){return t+n.quantity*n.price1}),0);$("#checkout-total").html(" €&ensp;".concat((0,e.ao)(a)))}else window.location.href=e.jQ+"/asporto.html"}(),(0,e.X9)("POST",{action:"getClosedTimeslots",data:"--"},(function(t){var n;window.closedTimeslots=new Set(t),(n=$(".orario-btn")).each((function(){var t=$(this),a=t.text(),e=!window.closedTimeslots.has(a);t.attr("disabled",!e),t.on("click",(function(){n.each((function(){$(this).attr("class","button orario-btn").attr("bselected",!1)})),t.attr("class","button orario-btn success").attr("bselected",!0),window.localStorage.timeSlot=a,$("#chosen-time").html(a)}))})),window.localStorage.timeSlot?$('button:contains("'.concat(window.localStorage.timeSlot,'")')).click():$("#chosen-time").html("--")}),(function(t){showMessage(messageError)})),function(){var t=JSON.parse(window.localStorage.currentClient);window.client=t;var n={order:{order_items:window.prods.map((function(t){console.log({p:t});var n={item_id:t.id,name:t.name,uuid:t.uuid,net_price:t.net_price,vat_perc:t.vat_perc||Math.round(100*(t.price1/t.net_price-1)),final_price:t.price1*t.quantity,final_net_price:t.net_price*t.quantity,notes:t.noteText,price:t.price1,department_id:t.department_id,quantity:t.quantity};return t.cotturaId&&(n.variations=[{name:"Cottura",value:t.cotturaV,variation_id:t.cotturaId,variation_value_id:t.cotturaI}]),t.category&&(n.category_id=t.category.id,n.category_name=t.category.name),n}))},order_customer:{email:t.email,first_name:t.name,last_name:t.surname,mobile:t.telephone}};console.log({data:n}),$("#send-order").on("click",(function(){if(!window.localStorage.timeSlot)return window.alert("Seleziona l'orario di ritiro dell'asporto");n.takeout_time=window.localStorage.timeSlot,(0,e.X9)("POST",{action:"registerOrder",data:n},(function(n){t.orders=JSON.parse(n).Attributes.orders,window.localStorage.currentClient=JSON.stringify(t);var a=t.orders[t.orders.length-1];window.localStorage.lastOrder=JSON.stringify(a),delete window.localStorage.currentOrder,window.localStorage.timeSlot_=window.localStorage.timeSlot,delete window.localStorage.timeSlot,window.location.href=e.jQ+"/checkout-landing.html"}),(function(t){alert("Qualcosa è andato storto. Contattaci al numero  071 8853384 oppure inviaci una email a info@beerstrot.it. Grazie")}))}))}()}))},453:function(t,n,a){a.d(n,{In:function(){return o},g$:function(){return i},v7:function(){return e}});var e=function(t,n,a,e,o,i,c){return a.replace(/\s+/g,""),'\n            <tr class="carrello-row-'.concat(c,'">\n                <td>\n                    <span class="titolo-item">').concat(t,'</span>\n                    <span class="note-item">').concat(n,'</span>\n                    <span class="cottura-item">').concat(a,'</span>\n                </td>\n                <td>\n                    <div class="input-group input-number-group">\n                        <div class="input-group-button">\n                            <span data-row-uuid="').concat(c,'" class="input-number-decrement input-number-decrement-').concat(c,'"><i class="las la-minus-square la-lg"></i></span>\n                        </div>\n                        <input class="input-number input-number-').concat(c,'" style="width:1.5rem; font-size: 0.8rem!important;" type="button" value="').concat(e,'" min="0" max="30">\n                        <div class="input-group-button">\n                            <span data-row-uuid="').concat(c,'" class="input-number-increment input-number-increment-').concat(c,'"><i class="las la-plus-square la-lg"></i></span>\n                        </div>\n                    </div>\n                </td>\n                <td>\n                    <span class="prezzo-item">€&thinsp;<span class="prezzo-item-').concat(c,'">').concat(o,"</span></span>\n                </td>\n            </tr>\n")},o=function(t,n,a,e,o){return'\n  \t<div class="checkout-summary-item align-middle">\n\t\t<div class="item-name">\n\t  \t\t<h1 class="titolo-item">'.concat(t,'</h1>\n            <p class="note-item">').concat(n,'</p>\n            <p class="cottura-item">').concat(a,'</p>\n\t  \t\t<p class="note-item">Quantità: ').concat(e,'</p>\n\t\t</div>\n        <div class="item-price">\n            <p class="prezzo-item">€&thinsp;').concat(o,"</p>\n        </div>\n  \t</div>\n")},i=function(t,n){var a=0,e=[];return t.forEach((function(t){a+=parseFloat(t.final_price);var n=t.variations?t.variations[0].value:"";e.push(c(t.name,t.notes,n,t.quantity,t.final_price))})),'\n<div class="clearfix">\n  <div id="itens-carrello-checkout">\n    '.concat(e.join("\n"),'\n  </div>\n  \t<div class="checkout-summary-details">\n\t    <div>\n\t      \t<h1 class="titolo-item">TOTALE:</h1>\n\t    </div>\n\t    <div class="item-price">\n\t      \t<h1 class="titolo-item" id="checkout-total">€&ensp;').concat(a.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),'</h1>\n\t    </div>\n\t</div>\n    <button type="button" id="remove-').concat(n,'" class="clear button hollow alert float-left">Elimina</button>\n    <button type="button" id="load-').concat(n,'" class="button submit float-right" hidden>Metti nel carrello e modifica</button>\n</div>\n')},c=function(t,n,a,e,o){return'\n<div class="checkout-summary-item align-middle">\n  <div class="item-name">\n    <h1 class="titolo-item">'.concat(t,'</h1>\n    <p class="note-item">').concat(n,'</p>\n    <p class="cottura-item">').concat(a,'</p>\n    <p class="note-item">Quantità: ').concat(e,'</p>\n  </div>\n  <div class="item-price">\n    <p class="prezzo-item ">€&thinsp;').concat(o,"</p>\n  </div>\n</div>\n")}}}]);