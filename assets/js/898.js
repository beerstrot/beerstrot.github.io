"use strict";(self.webpackChunkfoundation_zurb_template=self.webpackChunkfoundation_zurb_template||[]).push([[898],{898:function(t,n,e){e.r(n);var a=e(425),o=e(453);function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=t[e];return a}function r(){["name","surname","email","telephone"].forEach((function(t){return $("#".concat(t,"-m")).val(window.user[t])})),$("#newsletter-m").prop("checked",user.newsletter),$("#ttitle").html("Ciao ".concat(user.name))}function c(t){window.localStorage.currentOrder=JSON.stringify(t),window.location.href=a.jQ+"/checkout.html"}$(document).ready((function(){var t;window.localStorage.currentClient?window.user=JSON.parse(window.localStorage.currentClient):window.location.href="/#signup-login",$("#logout-btn").on("click",(function(){delete window.localStorage.currentClient,window.location.href="/"})),r(),$("#update-usr-btn").on("click",(function(){var t={};["name","surname","telephone","email"].forEach((function(n){var e;t[e=n]=$("#".concat(e,"-m")).val()})),t.newsletter=$("#newsletter-m").is(":checked"),(0,a.X9)("POST",{action:"updateClient",data:t},(function(t){["name","surname","telephone","newsletter"].forEach((function(n){window.user[n]=t.Attributes[n]})),r(),window.localStorage.currentClient=JSON.stringify(window.user)}),(function(t){showMessage(messageError)}))})),window.user.orders&&(t="gennaio, febbraio, marzo, aprile, maggio, giugno, luglio, agosto, settembre, ottobre, novembre, dicembre".split(", "),$("#carrelli-accordion").empty(),user.orders.forEach((function(n,e){var r=new Date(n.deliver_at),l="Ordine del ".concat(r.getDate()," ").concat(t[r.getMonth()]," ").concat(r.getFullYear()),s=$("<li/>",{class:"accordion-item","data-accordion-item":!0}).appendTo($("#carrelli-accordion"));$("<a/>",{class:"accordion-title",href:"#order-"+e}).html(l).appendTo(s);var u=(0,o.g$)(n.order_items,e);$("<div/>",{class:"accordion-content ordine-salvato-content clearfix","data-tab-content":!0,id:"order-"+e}).appendTo(s).html(u),$("#load-"+e).show(),$("#remove-"+e).show(),$("#load-"+e).on("click",(function(){return t=e,n={email:window.user.email,order_index:t},void(0,a.X9)("POST",{action:"loadPreviousOrder",data:n},(function(t){if(t.result)if(t.details.unavailable_items.length>0){$("#unavailable-items").empty();var n,e=function(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,n):void 0}}(t))){e&&(t=e);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return c=t.done,t},e:function(t){l=!0,r=t},f:function(){try{c||null==e.return||e.return()}finally{if(l)throw r}}}}(t.details.unavailable_items);try{for(e.s();!(n=e.n()).done;){var a=n.value;$("#unavailable-items").append("<li>"+a+"</li>")}}catch(t){e.e(t)}finally{e.f()}window.localStorage.tempOrder=JSON.stringify(t.details.available_items),new Foundation.Reveal($("#noProdotti")).open()}else c(t.details.available_items);else alert(t.details)}),(function(t){alert("Qualcosa è andato storto. Contattaci al numero  071 8853384 oppure inviaci una email a info@beerstrot.it. Grazie")}));var t,n})),$("#remove-"+e).on("click",(function(){return t=e,n={email:window.user.email,order_index:t},void(0,a.X9)("POST",{action:"deletePreviousOrder",data:n},(function(t){var n=JSON.parse(window.localStorage.currentClient);delete n.orders,n.orders=JSON.parse(JSON.stringify(t)),window.localStorage.currentClient=JSON.stringify(n),location.reload()}),(function(t){alert("Qualcosa è andato storto. Contattaci al numero  071 8853384 oppure inviaci una email a info@beerstrot.it. Grazie")}));var t,n}))}))),$("#poppas-test").click((function(t){new Foundation.Reveal($("#noProdotti")).open()})),$("#confirm-order-load").click((function(t){var n=JSON.parse(window.localStorage.tempOrder);delete window.localStorage.tempOrder,c(n)}))}))},453:function(t,n,e){e.d(n,{In:function(){return o},g$:function(){return i},v7:function(){return a}});var a=function(t,n,e,a,o,i,r){return e.replace(/\s+/g,""),'\n            <tr class="carrello-row-'.concat(r,'">\n                <td>\n                    <span class="titolo-item">').concat(t,'</span>\n                    <span class="note-item">').concat(n,'</span>\n                    <span class="cottura-item">').concat(e,'</span>\n                </td>\n                <td>\n                    <div class="input-group input-number-group">\n                        <div class="input-group-button">\n                            <span data-row-uuid="').concat(r,'" class="input-number-decrement input-number-decrement-').concat(r,'"><i class="las la-minus-square la-lg"></i></span>\n                        </div>\n                        <input class="input-number input-number-').concat(r,'" style="width:1.5rem; font-size: 0.8rem!important;" type="button" value="').concat(a,'" min="0" max="30">\n                        <div class="input-group-button">\n                            <span data-row-uuid="').concat(r,'" class="input-number-increment input-number-increment-').concat(r,'"><i class="las la-plus-square la-lg"></i></span>\n                        </div>\n                    </div>\n                </td>\n                <td>\n                    <span class="prezzo-item">€&thinsp;<span class="prezzo-item-').concat(r,'">').concat(o,"</span></span>\n                </td>\n            </tr>\n")},o=function(t,n,e,a,o){return'\n  \t<div class="checkout-summary-item align-middle">\n\t\t<div class="item-name">\n\t  \t\t<h1 class="titolo-item">'.concat(t,'</h1>\n            <p class="note-item">').concat(n,'</p>\n            <p class="cottura-item">').concat(e,'</p>\n\t  \t\t<p class="note-item">Quantità: ').concat(a,'</p>\n\t\t</div>\n        <div class="item-price">\n            <p class="prezzo-item">€&thinsp;').concat(o,"</p>\n        </div>\n  \t</div>\n")},i=function(t,n){var e=0,a=[];return t.forEach((function(t){e+=parseFloat(t.final_price);var n=t.variations?t.variations[0].value:"";a.push(r(t.name,t.notes,n,t.quantity,t.final_price))})),'\n<div class="clearfix">\n  <div id="itens-carrello-checkout">\n    '.concat(a.join("\n"),'\n  </div>\n  \t<div class="checkout-summary-details">\n\t    <div>\n\t      \t<h1 class="titolo-item">TOTALE:</h1>\n\t    </div>\n\t    <div class="item-price">\n\t      \t<h1 class="titolo-item" id="checkout-total">€&ensp;').concat(e.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),'</h1>\n\t    </div>\n\t</div>\n    <button type="button" id="remove-').concat(n,'" class="clear button hollow alert float-left">Elimina</button>\n    <button type="button" id="load-').concat(n,'" class="button submit float-right" hidden>Metti nel carrello e modifica</button>\n</div>\n')},r=function(t,n,e,a,o){return'\n<div class="checkout-summary-item align-middle">\n  <div class="item-name">\n    <h1 class="titolo-item">'.concat(t,'</h1>\n    <p class="note-item">').concat(n,'</p>\n    <p class="cottura-item">').concat(e,'</p>\n    <p class="note-item">Quantità: ').concat(a,'</p>\n  </div>\n  <div class="item-price">\n    <p class="prezzo-item ">€&thinsp;').concat(o,"</p>\n  </div>\n</div>\n")}}}]);